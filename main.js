!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector(".profile"),s=(document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),document.querySelector(".modal__input_type_name")),r=document.querySelector(".modal__input_type_about"),n=(document.querySelector(".modal__input_type_avatar"),document.querySelector(".profile__edit-button")),i=document.querySelector(".profile__add-button"),o=(document.querySelector(".modal__close-button"),document.querySelector(".profile__avatar-edit")),a=(document.querySelector("#card-template"),document.querySelector("#add-card-form"));var l=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleInputError(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this.inputElements)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._toggleButtonState(this._inputElements,this._submitButton,e),this._inputElements.forEach((t=>{t.addEventListener("input",(s=>{this._toggleInputError(t),this._toggleButtonState(this._inputElements,this._submitButton,e)}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._form,e)}resetValidation(){this._toggleButtonState()}};class d{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}addNewItem(e){this._container.append(e)}}class u{constructor(e){var t,s,r;t=this,r=e=>{"Escape"===e.key&&this.closeModal()},(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="_handleCloseOnEscape"))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,this._popupElement=document.querySelector(e),this._closeButtonElement=this._popupElement.querySelector(".modal__close-button")}openModal(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleCloseOnEscape)}closeModal(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleCloseOnEscape)}_handleCloseOnClick(e){e.target===this._popupElement&&this.closeModal()}setEventListeners(){this._closeButtonElement.addEventListener("click",(()=>this.closeModal())),this._popupElement.addEventListener("mousedown",(e=>this._handleCloseOnClick(e)))}}class c extends u{constructor(e,t){super(e),this._handleFormSubmit=t,this._modalForm=this._popupElement.querySelector(".modal__form"),this._inputList=Array.from(this._modalForm.querySelectorAll(".modal__input")),this._saveButton=this._modalForm.querySelector(".modal__save-button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}closeModal(){this._modalForm.reset(),super.closeModal()}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._saveButton.textContent=e?t:"Save"}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault,this.renderLoading(!0);const t=this._getInputValues();this._handleFormSubmit(t)}))}}const h=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.url=t,this.headers=s}_handleServerResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserData()])}getUserData(){return fetch(`${this.url}/users/me`,{headers:this.headers}).then(this._handleServerResponse)}getInitialCards(){return fetch(`${this.url}/cards`,{headers:this.headers}).then(this._handleServerResponse)}addNewCard(e){let{title:t,link:s}=e;return fetch(`${this.url}/cards`,{headers:this.headers,method:"POST",body:JSON.stringify({name:t,link:s})}).then(this._handleServerResponse)}deleteCard(e){return fetch(`${this.url}/cards/${e}`,{headers:this.headers,method:"DELETE"}).then(this._handleServerResponse)}toggleLikeStatus(e,t){return fetch(`${this.url}/cards/likes/${e}`,{headers:this.headers,method:t?"PUT":"DELETE"}).then(this._handleServerResponse)}submitUserEdit(e){return fetch(`${this.url}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleServerResponse)}setAvatar(e){let{avatar:t}=e;return fetch(`${this.url}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then(this._handleServerResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"fa002eaa-cfdc-49b2-ba7a-7640eb468742","Content-Type":"application/json"}});let _=null,m=null;const p=new class{constructor(e,t,s){this._userNameElement=document.querySelector(e),this._userAboutElement=document.querySelector(t),this._userAvatarElement=document.querySelector(s)}getUserInfo(){return{name:this._userNameElement.textContent,about:this._userAboutElement.textContent,avatar:this._userAvatarElement.src}}setUserInfo(e){let{userName:t,userAbout:s}=e;this._userNameElement.textContent=t,this._userAboutElement.textContent=s}setAvatar(e){this._userAvatarElement.src=e}}(".profile__title",".profile__subtitle",".profile__image"),v=(e,s)=>{const r=new class{constructor(e,t){let{data:s,userId:r,handleImageClick:n,handleLikeClick:i,handleDeleteClick:o}=e;var a,l,d;a=this,d=()=>this._id,(l=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(l="getCardId"))in a?Object.defineProperty(a,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[l]=d,this._data=s,this._title=s.name,this._link=s.link,this._id=s._id,this._userId=r,this._ownerId=s.owner._id,this._likes=s.likes,this._cardSelector=t,this._handleImageClick=n,this._handleLikeClick=i,this._handleDeleteClick=o}_getTemplate(){return document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__caption");return this._cardLikeButton=this._element.querySelector(".card__like-button"),this._cardDeleteButton=this._element.querySelector(".card__delete-icon"),this._cardImageButton=this._element.querySelector(".card__image"),this._cardLikesCounter=this._element.querySelector(".card__like-counter"),this._setEventListeners(),e.src=this._link,e.alt=this._title,t.textContent=this._title,this._renderLikes(),this._userId!==this._ownerId&&this._cardDeleteButton.remove(),this._element}handleDeleteCard(){this._element.remove(),this._element.null}setLikes(e){this._likes=e,this._renderLikes()}isLiked(){return this._likes.some((e=>e._id===this._userId))}_renderLikes(){this._cardLikesCounter.textContent=this._likes.length||"",this.isLiked()?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>this._handleLikeClick())),this._cardDeleteButton.addEventListener("click",(()=>this._handleDeleteClick())),this._cardImageButton.addEventListener("click",(()=>this._handleImageClick({title:this._title,link:this._link})))}}({data:e,userId:s,handleImageClick:e=>{f.openModal(e)},handleDeleteClick:()=>{const e=r.getCardId();g.openModal(),g.setSubmitAction((()=>{g.renderLoading(!0),h.deleteCard(e).then((()=>{r.handleDeleteCard(),g.closeModal()})).catch((e=>console.log(e))).finally((()=>{g.renderLoading(!1)}))}))},handleLikeClick:()=>{h.toggleLikeStatus(r.getCardId(),!r.isLiked()).then((e=>r.setLikes(e.likes))).catch((e=>console.log(e)))}},".card-template",t.id);return r.getView()};h.getAppInfo().then((e=>{let[t,s]=e;p.setUserInfo({userName:s.name,userAbout:s.about});const r=s.avatar;p.setAvatar(r),_=s._id,m=new d({items:t,renderer:e=>{const t=v(e,_);m.addNewItem(t)}},".cards__list"),m.renderItems()}));const E=new c("#add-card-modal",(e=>{E.renderLoading(!0),h.addNewCard(e).then((e=>{const t=v(e,e.owner._id);m.addItem(t),a.reset(),E.closeModal()})).finally((()=>{E.renderLoading(!1)}))})),b=new c("#avatar-modal",(e=>{b.renderLoading(!0),h.setAvatar(e).then((e=>{p.setAvatar(e.avatar),b.closeModal()})).catch((e=>console.log(e))).finally((()=>b.renderLoading(!1)))})),S=new c("#edit-profile-modal",(e=>{const t={name:e.name,about:e.about,avatar:e.avatar};h.submitUserEdit(t).then((e=>{p.setUserInfo({userName:e.name,userAbout:e.about}),S.closeModal()})).catch((e=>console.log(e))).finally((()=>{S.renderLoading(!1)}))})),g=new class extends u{constructor(e){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._saveButton=this._form.querySelector(".modal__save-button")}setSubmitAction(e){this._handleSubmitCallback=e}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._saveButton.textContent=e?t:"Save"}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()}))}}("#delete-modal");g.setEventListeners();const f=new class extends u{constructor(e){super(e),this._cardImage=this._popupElement.querySelector(".modal__image"),this._cardCaption=this._popupElement.querySelector(".modal__caption")}openModal(e){let{title:t,link:s}=e;this._cardImage.src=s,this._cardImage.alt=t,this._cardCaption.textContent=t,super.openModal()}}("#image-modal");S.setEventListeners(),E.setEventListeners(),f.setEventListeners(),g.setEventListeners(),b.setEventListeners(),n.addEventListener("click",(()=>{!function(){const{name:e,about:t}=p.getUserInfo();s.value=e,r.value=t}(),S.openModal()})),i.addEventListener("click",(()=>{E.openModal(),y.resetValidation()})),o.addEventListener("click",(()=>{b.openModal(),k.resetValidation()}));const y=new l(e,document.querySelector("#add-card-form")),L=new l(e,document.querySelector("#edit-profile-form")),k=new l(e,document.querySelector("#avatar-form"));L.enableValidation(),y.enableValidation(),k.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBaUIsSUFHbkMsTUFBTXVKLEVBQW1CLElBQUlFLEVBQzNCOU0sRUFDQU8sU0FBU0MsY0FBYyxtQkFFbkJ1TSxFQUFvQixJQUFJRCxFQUM1QjlNLEVBQ0FPLFNBQVNDLGNBQWMsdUJBRW5CcU0sRUFBa0IsSUFBSUMsRUFDMUI5TSxFQUNBTyxTQUFTQyxjQUFjLGlCQUd6QnVNLEVBQWtCNUosbUJBQ2xCeUosRUFBaUJ6SixtQkFDakIwSixFQUFnQjFKLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1TdWJtaXQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiLmNhcmQtdGVtcGxhdGVcIixcclxuICBwcmV2aWV3UG9wdXA6IFwiI2ltYWdlLW1vZGFsXCIsXHJcbiAgZWRpdFByb2ZpbGVNb2RhbDogXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIsXHJcbiAgZWRpdFByb2ZpbGVGb3JtOiBcIiNlZGl0LXByb2ZpbGUtZm9ybVwiLFxyXG4gIGFkZENhcmRNb2RhbDogXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHVzZXJBYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxuICB1c2VyQXZhdGFyTW9kYWw6IFwiI2F2YXRhci1tb2RhbFwiLFxyXG4gIGltYWdlTW9kYWw6IFwiI2ltYWdlLW1vZGFsXCIsXHJcbiAgZGVsZXRlTW9kYWw6IFwiI2RlbGV0ZS1tb2RhbFwiLFxyXG4gIGF2YXRhckZvcm06IFwiI2F2YXRhci1mb3JtXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0VmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFib3V0SW5wdXRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfYWJvdXRcIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGF2YXRhcklucHV0VmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2F2YXRhclwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBjbG9zZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWVkaXRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XHJcbiIsImltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5pbnB1dEVsZW1lbnRzKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxlbWVudHMsIHRoaXMuX3N1Ym1pdEJ1dHRvbiwgY29uZmlnKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLFxyXG4gICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLFxyXG4gICAgICAgICAgY29uZmlnXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm0sIGNvbmZpZyk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0l0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVDbG9zZU9uRXNjYXBlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUNsb3NlT25Fc2NhcGUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlT25Fc2NhcGUgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlQ2xvc2VPbkNsaWNrKGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlTW9kYWwoKSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVDbG9zZU9uQ2xpY2soZXZ0KVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX21vZGFsRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1EYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlTW9kYWwoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQ7XHJcbiAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm1TdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVN1Ym1pdC5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIHNlbGVjdG9ycyxcclxuICBwcm9maWxlLFxyXG4gIHByb2ZpbGVOYW1lSW5wdXRWYWx1ZSxcclxuICBwcm9maWxlQWJvdXRJbnB1dFZhbHVlLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgYXZhdGFySWNvbixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImZhMDAyZWFhLWNmZGMtNDliMi1iYTdhLTc2NDBlYjQ2ODc0MlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5sZXQgdXNlcklkID0gbnVsbDtcclxubGV0IGNhcmRTZWN0aW9uID0gbnVsbDtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIHNlbGVjdG9ycy51c2VyTmFtZVNlbGVjdG9yLFxyXG4gIHNlbGVjdG9ycy51c2VyQWJvdXRTZWxlY3RvcixcclxuICBzZWxlY3RvcnMudXNlckF2YXRhclNlbGVjdG9yXHJcbik7XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEsIHVzZXJJZCkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6IChpbWdEYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuTW9kYWwoaW1nRGF0YSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBjYXJkLmdldENhcmRJZCgpO1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLm9wZW5Nb2RhbCgpO1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICBkZWxldGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5kZWxldGVDYXJkKGlkKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgICAgZGVsZXRlUG9wdXAuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGRlbGV0ZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAudG9nZ2xlTGlrZVN0YXR1cyhjYXJkLmdldENhcmRJZCgpLCAhY2FyZC5pc0xpa2VkKCkpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiBjYXJkLnNldExpa2VzKHJlcy5saWtlcykpXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcclxuICAgIHByb2ZpbGUuaWRcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcclxuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXRWYWx1ZS52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZUFib3V0SW5wdXRWYWx1ZS52YWx1ZSA9IGFib3V0O1xyXG59XHJcblxyXG5hcGkuZ2V0QXBwSW5mbygpLnRoZW4oKFtjYXJkc0FycmF5LCB1c2VyRGF0YV0pID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICB1c2VyTmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgIHVzZXJBYm91dDogdXNlckRhdGEuYWJvdXQsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHVzZXJBdmF0YXIgPSB1c2VyRGF0YS5hdmF0YXI7XHJcbiAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJBdmF0YXIpO1xyXG5cclxuICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgaXRlbXM6IGNhcmRzQXJyYXksXHJcbiAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEsIHVzZXJJZCk7XHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkTmV3SXRlbShjYXJkKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuICApO1xyXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZENhcmRNb2RhbCwgKGRhdGEpID0+IHtcclxuICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBkZWJ1Z2dlcjtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGRhdGEpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhLCBkYXRhLm93bmVyLl9pZCk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICAgIGFkZENhcmRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZU1vZGFsKCk7XHJcbiAgICB9KVxyXG5cclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgYXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMudXNlckF2YXRhck1vZGFsLCAoYXZhdGFyKSA9PiB7XHJcbiAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5zZXRBdmF0YXIoYXZhdGFyKVxyXG4gICAgLnRoZW4oKHVzZXIpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXIuYXZhdGFyKTtcclxuICAgICAgYXZhdGFyTW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBzZWxlY3RvcnMuZWRpdFByb2ZpbGVNb2RhbCxcclxuICAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgdXBkYXRlVXNlciA9IHtcclxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogZGF0YS5hYm91dCxcclxuICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgIH07XHJcbiAgICBhcGlcclxuICAgICAgLnN1Ym1pdFVzZXJFZGl0KHVwZGF0ZVVzZXIpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJOYW1lOiByZXMubmFtZSwgdXNlckFib3V0OiByZXMuYWJvdXQgfSk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZU1vZGFsKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybVN1Ym1pdChzZWxlY3RvcnMuZGVsZXRlTW9kYWwpO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMuaW1hZ2VNb2RhbCk7XHJcblxyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZpbGxQcm9maWxlRm9ybSgpO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3Blbk1vZGFsKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuTW9kYWwoKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmF2YXRhckljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJNb2RhbC5vcGVuTW9kYWwoKTtcclxuICBhdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZyxcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIilcclxuKTtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWcsXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKVxyXG4pO1xyXG5jb25zdCBhdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWcsXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZm9ybVwiKVxyXG4pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy51cmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckRhdGEoKV0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckRhdGEoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IHRpdGxlLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiB0aXRsZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2VTdGF0dXMoaWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJQVVRcIiA6IFwiREVMRVRFXCIsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHN1Ym1pdFVzZXJFZGl0KGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZVNlbGVjdG9yLCB1c2VyQWJvdXRTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckFib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJBYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgdXNlck5hbWUsIHVzZXJBYm91dCB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyQWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIodXNlckF2YXRhcikge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gdXNlckF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IGRhdGEsIHVzZXJJZCwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljayB9LFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQgPSAoKSA9PiB0aGlzLl9pZDtcclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtaWNvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlc0NvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudGVyXCIpO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICBjYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50Lm51bGw7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aCB8fCBcIlwiO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljaygpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKClcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgdGl0bGU6IHRoaXMuX3RpdGxlLCBsaW5rOiB0aGlzLl9saW5rIH0pXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7XHJcbiAgfVxyXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKHsgdGl0bGUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9jYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG5cclxuICAgIHN1cGVyLm9wZW5Nb2RhbCgpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZU5hbWVJbnB1dFZhbHVlIiwicHJvZmlsZUFib3V0SW5wdXRWYWx1ZSIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImF2YXRhckljb24iLCJhZGRDYXJkRm9ybSIsImNvbnN0cnVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl90b2dnbGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudHMiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImFkZE5ld0l0ZW0iLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZU1vZGFsIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbkVsZW1lbnQiLCJvcGVuTW9kYWwiLCJfaGFuZGxlQ2xvc2VPbkVzY2FwZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlQ2xvc2VPbkNsaWNrIiwidGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfbW9kYWxGb3JtIiwiX2lucHV0TGlzdCIsIl9zYXZlQnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybURhdGEiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiaW5wdXRWYWx1ZXMiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInVybCIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckRhdGEiLCJmZXRjaCIsInRoZW4iLCJhZGROZXdDYXJkIiwidGl0bGUiLCJsaW5rIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVDYXJkIiwidG9nZ2xlTGlrZVN0YXR1cyIsImlzTGlrZWQiLCJzdWJtaXRVc2VyRWRpdCIsImRhdGEiLCJhYm91dCIsInNldEF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySWQiLCJjYXJkU2VjdGlvbiIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJBYm91dFNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyQWJvdXRFbGVtZW50IiwiX3VzZXJBdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJzcmMiLCJzZXRVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckFib3V0IiwidXNlckF2YXRhciIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX2lkIiwiX2RhdGEiLCJfdGl0bGUiLCJfbGluayIsIl91c2VySWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfZWxlbWVudCIsImltYWdlRWxlbWVudCIsImNhcHRpb25FbGVtZW50IiwiX2NhcmRMaWtlQnV0dG9uIiwiX2NhcmREZWxldGVCdXR0b24iLCJfY2FyZEltYWdlQnV0dG9uIiwiX2NhcmRMaWtlc0NvdW50ZXIiLCJhbHQiLCJfcmVuZGVyTGlrZXMiLCJoYW5kbGVEZWxldGVDYXJkIiwibnVsbCIsInNldExpa2VzIiwic29tZSIsImxpa2UiLCJsZW5ndGgiLCJpbWdEYXRhIiwiY2FyZFByZXZpZXdQb3B1cCIsImdldENhcmRJZCIsImRlbGV0ZVBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImNhcmRzQXJyYXkiLCJ1c2VyRGF0YSIsImFkZENhcmRQb3B1cCIsImF2YXRhck1vZGFsIiwidXNlciIsImVkaXRQcm9maWxlUG9wdXAiLCJ1cGRhdGVVc2VyIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdENhbGxiYWNrIiwiX2NhcmRJbWFnZSIsIl9jYXJkQ2FwdGlvbiIsImZpbGxQcm9maWxlRm9ybSIsImFkZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJWYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9